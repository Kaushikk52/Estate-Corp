<!-- <p>user-dash works!</p> -->
<app-navbar></app-navbar>
<app-banner></app-banner>
<div class="search-bar">
  <img src="../../../assets/icons/search.svg" alt="" class="icons">
  <input type="text" placeholder="Search for a property..." class="search-input" [(ngModel)]="searchText">
</div>
<div class="container-fluid table-container my-4">
    <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Owner Name</th>
            <th scope="col">Property Id</th>
            <th scope="col">Name</th>
            <th scope="col">Type</th>
            <th scope="col">Option</th>
            <th scope="col">City</th>
            <th scope="col">Locality</th>
            <th scope="col" colspan="3">Action</th>            
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="searchText; else originalProperties">
            <tr *ngFor="let property of filterProperties()">
              <th scope="row">#</th>
              <td>{{property.propertyOwner}}</td>
              <td>{{property.propertyId}}</td>            
              <td>{{property.propertyName}}</td>            
              <td>{{property.propertyType}}</td>            
              <td>{{property.propertyOption}}</td> 
              <td>{{property.city}}</td> 
              <td>{{property.locality}}</td> 
              <button class="view" (click)="viewProperty(property.propertyId)">View</button>
              <Button class="approve" (click)="toggleApproval(property.propertyId, property.isApproved)">
                {{ property.isApproved ? 'Unapprove' : 'Approve' }}
              </Button>
              <td><Button class="edit">Edit</Button></td>          
              <td><Button class="delete">Delete</Button></td>  
            </tr>  
          </ng-container>
          <ng-template #originalProperties>
            <tr *ngFor="let property of properties">
              <th scope="row">#</th>
              <td>{{property.propertyOwner}}</td>
              <td>{{property.propertyId}}</td>            
              <td>{{property.propertyName}}</td>            
              <td>{{property.propertyType}}</td>            
              <td>{{property.propertyOption}}</td> 
              <td>{{property.city}}</td> 
              <td>{{property.locality}}</td> 
              <td><Button class="view">View</Button></td> 
              <Button class="approve" (click)="toggleApproval(property.propertyId, property.isApproved)">
                {{ property.isApproved ? 'Unapprove' : 'Approve' }}
              </Button>
              <td><Button class="edit">Edit</Button></td>          
              <td><Button class="delete">Delete</Button></td>        
            </tr>
        </ng-template>
        </tbody>
      </table>
      <app-alert-popup *ngIf="showApprovalAlert" [message]="'Property Approved'"></app-alert-popup>
      <app-alert-popup *ngIf="showUnapprovalAlert" [message]="'Property Unapproved'"></app-alert-popup>
</div>